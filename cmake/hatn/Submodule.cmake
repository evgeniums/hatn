MACRO(INCLUDE_SUBMODULE Name)
    SET (Submodule ${Name})
    INCLUDE(${Submodule}/${Submodule}.cmake)
    TARGET_SOURCES(${Module} PRIVATE ${SUBMODULE_SOURCES} ${SUBMODULE_HEADERS})
    SET (SUBMODULE_HEADERS "")
    SET (SUBMODULE_SOURCES "")
    SET (Submodule "")
ENDMACRO(INCLUDE_SUBMODULE)

MACRO(SUBMODULE_HEADERS)
    SET (INC_DIR ${CMAKE_CURRENT_SOURCE_DIR}/include/${PROJECT_NAME}/${Submodule})
    SET (SUBMODULE_HEADERS "")
    SET(Args ${ARGN})
    LIST(LENGTH Args NumArgs)
    IF(NumArgs GREATER 0)
        FOREACH(ARG ${Args})
            LIST (APPEND SUBMODULE_HEADERS ${INC_DIR}/${ARG})
        ENDFOREACH()
    ENDIF()
ENDMACRO(SUBMODULE_HEADERS)

MACRO(SUBMODULE_SOURCES)
    SET (SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR}/${Submodule})
    SET (SUBMODULE_SOURCES "")
    SET(Args ${ARGN})
    LIST(LENGTH Args NumArgs)
    IF(NumArgs GREATER 0)
        FOREACH(ARG ${Args})
            LIST (APPEND SUBMODULE_SOURCES ${SRC_DIR}/${ARG})
        ENDFOREACH()
    ENDIF()
ENDMACRO(SUBMODULE_SOURCES)
